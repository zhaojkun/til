# MakeFile 简介

`make`一般会将工作细节村房子啊一个名为`makefile`的文件中

如果将某个工作目标(target)指定成命令行参数，`make`就会特别针对该工作目标进行更新动作；如果命令行为指定任何工作目标，`make`就会采用`makefile`文件中的第一个工作目标，成为`默认目标`

`makefile`描述了源代码文件、中间文件以及可执行文件之间的关系，使得`make`能够以最少的工作量来完成更新可执行文件的工作。

基本上`makefile`文件中包含了一组用来编译应用程序的规则。一项规则可分成三部分：工作目标（target）,它的必要条件(prerequisite)以及所要执行的命令（command）

```shell
target: prereq1 prereq2
	commands
```

命令脚本通常出现在后续的文本行上，而且会放在跳格符（tab character）之后，如果冒号后边没有指定必要的条件，那么只有在工作目标所代表的文件不存在时，才会进行更新动作。

当make被要求处理某项规则时，它首先会找出必要条件和工作目标中所指定的文件。如果必要条件中存在管理到其他规则的文件，则make会先完成相应规则的更新动作，然后才会考虑到工作目标。如果必要条件中存在时间戳在工作目标的时间戳之后的文件，则make会执行命令以便重新建立工作目标。脚本被传递给shell并在其subshell中运行。如果其中的任何命令发生错误，则make会终止工作目标的建立动作并结束执行。

"自顶向下"的风格是makefile文件中常见的手法。

“从工作目标到必要条件，从必要条件到工作目标，再从工作目标到必要条件”的链接机制就是make分析makefile决定要执行哪些命令的典型做法。

make提供了许多命令行选项。其中最有用的选项之一是`--just-print`(或`-n`)，用来要求make显示它将为特定工作目标执行的命令，但不要实际执行它们。

可以使用标准Uninx转义字符——反斜线（`\`），来延续过长的文本行。反斜线一般用来延续过长的命令，也可用来延续必要条件。
